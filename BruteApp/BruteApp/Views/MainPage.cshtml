@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.MainPage>
@using BruteApp.Helpers
@using ContentModels = Umbraco.Web.PublishedContentModels;
@{
    Layout = "MasterLayout.cshtml";    
}

@section styles {            
    <link href="~/css/index.css" rel="stylesheet" />
}

@section svg {
    <svg style="display: none">
        <filter id='grayscale'>
            <feColorMatrix type='matrix'
                           values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/>
        </filter>
    </svg>
}

<article>
    @*@{
        var catalog = (Catalog)Umbraco.TypedContentSingleAtXPath(string.Format("//{0}", AttributeHelper.GetTypeAlias<Catalog>()));
        var musicians = catalog.Children.SelectMany(item => item.Children).Cast<Musician>().ToList();
        var songs = musicians.SelectMany(item => item.Children.Cast<Song>()).ToList();
        var distinctSongs = songs.GroupBy(x => x.NavigationName).Select(y => y.First());
    }*@
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="filters-section">
                    <div class="col-xl-5">
                        <div class="search">
                            <select class="search-bar" type="text" placeholder="Введите название группы" autocomplete="off" autocorrect="off"></select>
                        </div>
                    </div>
                    @CreateCatlogMenu()
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/foals.jpg"/>
                        <div class="description">
                            <p>Foals</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/HIM.jpg"/>
                        <div class="description">
                            <p>HIM</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/Kings-of-Leon.jpg"/>
                        <div class="description">
                            <p>Kings of leon</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/TheSunshineUnderground.jpg"/>
                        <div class="description">
                            <p>The sunshine Underground</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/Kings-of-Leon.jpg"/>
                        <div class="description">
                            <p>The sunshine Underground</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/foals.jpg"/>
                        <div class="description">
                            <p>The sunshine Underground</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/foals.jpg"/>
                        <div class="description">
                            <p>The sunshine Underground</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm-6 col-md-4 col-lg-3 col-xl-3 col-xxl-2">
                    <a href="javascript:void(0)" class="musician">
                        <img src="img/TheSunshineUnderground.jpg"/>
                        <div class="description">
                            <p>The sunshine Underground</p>
                            <span>перевод песен</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</article>

@section scripts {
    <script src="~/scripts/main.js"></script>
}

@helper CreateCatlogMenu()
{
    var catalog = (Catalog) Umbraco.TypedContentSingleAtXPath(string.Format("//{0}", AttributeHelper.GetTypeAlias<Catalog>()));

    <div class="col-xl-7 no-padding">
        <div class="filter">
            <p>Выберите исполнителя по первой букве (цифре):</p>
            <ul>
                @foreach (var item in catalog.Children.OrderBy(x => x.GetPropertyValue("NavigationName")))
                {
                    if ((string) item.GetPropertyValue("navigationName") != string.Empty)
                    {
                        <li>
                            <a href="@item.Url">@item.GetPropertyValue("navigationName")</a>
                        </li>
                    }
                }
            </ul>
        </div>
    </div>
}